<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Pavine üíï</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700;900&family=Space+Grotesk:wght@300;400;500;600;700&family=Courier+Prime&display=swap" rel="stylesheet">
    <!-- QR Code Library - Using qrcode-generator (better compatibility) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1DB954;
            --secondary: #ff6b9d;
            --dark: #121212;
            --dark-elevated: #1a1a1a;
            --dark-card: #282828;
            --text-primary: #ffffff;
            --text-secondary: #b3b3b3;
            --accent-purple: #8b5cf6;
            --accent-pink: #ec4899;
            --gradient-spotify: linear-gradient(135deg, #1DB954 0%, #1ed760 100%);
            --gradient-love: linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%);
        }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background: var(--dark);
            color: var(--text-primary);
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
            transition: background 0.5s ease, color 0.5s ease;
        }

        /* CREATIVE DARK MODE BACKGROUND - Rich and Romantic */
        body.dark-theme {
            background: 
                radial-gradient(ellipse at top left, rgba(139, 92, 246, 0.2) 0%, transparent 50%),
                radial-gradient(ellipse at top right, rgba(236, 72, 153, 0.18) 0%, transparent 50%),
                radial-gradient(ellipse at bottom left, rgba(29, 185, 84, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at bottom right, rgba(255, 107, 157, 0.15) 0%, transparent 50%),
                radial-gradient(circle at center, rgba(236, 72, 153, 0.05) 0%, transparent 70%),
                linear-gradient(135deg, 
                    #0a0015 0%, 
                    #1a0520 15%, 
                    #0f001a 30%, 
                    #150520 45%,
                    #1a0a1f 60%,
                    #0f0018 75%,
                    #0a0015 100%
                );
        }

        body.dark-theme::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            background-image: 
                radial-gradient(circle at 15% 30%, rgba(236, 72, 153, 0.25) 0%, transparent 35%),
                radial-gradient(circle at 85% 70%, rgba(139, 92, 246, 0.22) 0%, transparent 40%),
                radial-gradient(circle at 50% 50%, rgba(255, 107, 157, 0.15) 0%, transparent 45%),
                radial-gradient(circle at 30% 80%, rgba(29, 185, 84, 0.12) 0%, transparent 30%),
                radial-gradient(circle at 70% 20%, rgba(236, 72, 153, 0.18) 0%, transparent 35%),
                radial-gradient(circle at 40% 60%, rgba(139, 92, 246, 0.1) 0%, transparent 40%),
                url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M50 25 C45 25, 40 30, 40 35 C40 45, 50 55, 50 65 C50 55, 60 45, 60 35 C60 30, 55 25, 50 25' fill='none' stroke='rgba(236, 72, 153, 0.08)' stroke-width='1'/%3E%3Cpath d='M25 50 L30 45 L35 50 L30 55 Z' fill='rgba(139, 92, 246, 0.06)'/%3E%3Cpath d='M75 50 L80 45 L85 50 L80 55 Z' fill='rgba(236, 72, 153, 0.06)'/%3E%3Ccircle cx='20' cy='20' r='2' fill='rgba(139, 92, 246, 0.1)'/%3E%3Ccircle cx='80' cy='80' r='2' fill='rgba(236, 72, 153, 0.1)'/%3E%3Ccircle cx='80' cy='20' r='1.5' fill='rgba(29, 185, 84, 0.08)'/%3E%3Ccircle cx='20' cy='80' r='1.5' fill='rgba(255, 107, 157, 0.1)'/%3E%3Cpath d='M50 75 L48 78 L52 78 Z' fill='rgba(236, 72, 153, 0.07)'/%3E%3C/svg%3E");
            opacity: 0.2;
            pointer-events: none;
            transition: opacity 0.5s ease;
        }

        body.dark-theme::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            background-image: 
                repeating-linear-gradient(45deg, transparent, transparent 80px, rgba(236, 72, 153, 0.03) 80px, rgba(236, 72, 153, 0.03) 160px),
                repeating-linear-gradient(-45deg, transparent, transparent 80px, rgba(139, 92, 246, 0.025) 80px, rgba(139, 92, 246, 0.025) 160px),
                repeating-linear-gradient(90deg, transparent, transparent 120px, rgba(255, 107, 157, 0.02) 120px, rgba(255, 107, 157, 0.02) 240px);
            opacity: 0.12;
            pointer-events: none;
            transition: opacity 0.5s ease;
        }

        /* Light mode support - Enhanced romantic theme */
        body.light-theme {
            --dark: #fff5f9;
            --dark-elevated: #ffe8f3;
            --dark-card: #ffffff;
            --text-primary: #1a1a1a;
            --text-secondary: #6b6b6b;
            background: 
                radial-gradient(ellipse at top left, rgba(236, 72, 153, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at top right, rgba(139, 92, 246, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at bottom, rgba(255, 107, 157, 0.1) 0%, transparent 50%),
                linear-gradient(135deg, #fff5f9 0%, #ffe4f0 30%, #ffd6e8 60%, #ffcce0 100%);
        }

        body.light-theme::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            opacity: 0.15;
            background-image: 
                radial-gradient(circle at 20% 50%, rgba(236, 72, 153, 0.25) 0%, transparent 40%),
                radial-gradient(circle at 80% 80%, rgba(139, 92, 246, 0.22) 0%, transparent 45%),
                radial-gradient(circle at 40% 20%, rgba(255, 107, 157, 0.18) 0%, transparent 50%),
                radial-gradient(circle at 70% 40%, rgba(236, 72, 153, 0.12) 0%, transparent 55%),
                url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M50 20 L55 40 L75 45 L60 60 L65 80 L50 70 L35 80 L40 60 L25 45 L45 40 Z' fill='none' stroke='rgba(236, 72, 153, 0.1)' stroke-width='1.5'/%3E%3Ccircle cx='30' cy='30' r='3' fill='rgba(139, 92, 246, 0.12)'/%3E%3Ccircle cx='70' cy='70' r='3' fill='rgba(236, 72, 153, 0.12)'/%3E%3C/svg%3E");
            pointer-events: none;
        }

        body.light-theme::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            opacity: 0.08;
            background-image: 
                repeating-linear-gradient(45deg, transparent, transparent 80px, rgba(236, 72, 153, 0.05) 80px, rgba(236, 72, 153, 0.05) 160px),
                repeating-linear-gradient(-45deg, transparent, transparent 80px, rgba(139, 92, 246, 0.04) 80px, rgba(139, 92, 246, 0.04) 160px);
            pointer-events: none;
        }

        body.light-theme .loading-screen {
            background: linear-gradient(135deg, #fff5f9 0%, #ffe4f0 100%);
        }

        body.light-theme .playlist-cover,
        body.light-theme .hunt-clue,
        body.light-theme .clue-input,
        body.light-theme .gallery-slider,
        body.light-theme .success-info {
            box-shadow: 0 15px 50px rgba(236, 72, 153, 0.2);
        }

        body.light-theme .track:hover {
            background: rgba(236, 72, 153, 0.1);
        }

        body.light-theme .gallery-btn,
        body.light-theme .hunt-step {
            background: rgba(255, 255, 255, 0.95);
            border-color: rgba(236, 72, 153, 0.3);
        }

        body.light-theme .clue-input {
            background: rgba(255, 255, 255, 0.9);
            border-color: rgba(236, 72, 153, 0.3);
        }

        /* Fix light mode button visibility */
        body.light-theme .btn-secondary {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid rgba(236, 72, 153, 0.4);
            color: #1a1a1a;
            box-shadow: 0 4px 15px rgba(236, 72, 153, 0.15);
        }

        body.light-theme .btn-secondary:hover {
            background: rgba(255, 255, 255, 1);
            border-color: rgba(236, 72, 153, 0.6);
            box-shadow: 0 6px 20px rgba(236, 72, 153, 0.25);
        }

        /* Theme Toggle Button */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--dark-card);
            border: 2px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: all 0.3s ease;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
        }

        .theme-toggle:hover {
            transform: scale(1.1) rotate(15deg);
            box-shadow: 0 12px 32px rgba(236, 72, 153, 0.4);
        }

        .theme-toggle-icon {
            font-size: 1.5rem;
            transition: transform 0.3s ease;
        }

        body.light-theme .theme-toggle {
            background: white;
            border-color: rgba(236, 72, 153, 0.2);
            box-shadow: 0 8px 24px rgba(236, 72, 153, 0.15);
        }

        /* Response Notification - Visible to BOTH parties */
        .response-notification {
            position: fixed;
            top: 90px;
            right: 20px;
            max-width: 350px;
            background: var(--dark-card);
            border: 2px solid var(--primary);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 20px 60px rgba(29, 185, 84, 0.4);
            z-index: 9998;
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.5s ease;
            pointer-events: none;
        }

        .response-notification.show {
            opacity: 1;
            transform: translateY(0);
            pointer-events: all;
        }

        .response-notification.answer-yes {
            border-color: var(--primary);
            animation: pulse-success 2s ease-in-out infinite;
        }

        @keyframes pulse-success {
            0%, 100% { box-shadow: 0 20px 60px rgba(29, 185, 84, 0.4); }
            50% { box-shadow: 0 20px 60px rgba(29, 185, 84, 0.7); }
        }

        .response-notification.answer-no {
            border-color: #ef4444;
            box-shadow: 0 20px 60px rgba(239, 68, 68, 0.3);
        }

        .response-notification h4 {
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: var(--primary);
        }

        .response-notification.answer-no h4 {
            color: #ef4444;
        }

        .response-notification p {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .response-notification .response-time {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-top: 8px;
            opacity: 0.7;
        }

        .notification-close {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 1.2rem;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
        }

        .notification-close:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }

        body.light-theme .response-notification {
            background: white;
            box-shadow: 0 20px 60px rgba(29, 185, 84, 0.25);
        }

        body.light-theme .response-notification.answer-yes {
            animation: pulse-success-light 2s ease-in-out infinite;
        }

        @keyframes pulse-success-light {
            0%, 100% { box-shadow: 0 20px 60px rgba(29, 185, 84, 0.25); }
            50% { box-shadow: 0 20px 60px rgba(29, 185, 84, 0.45); }
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--dark);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            transition: opacity 0.5s ease;
        }

        .loading-screen.fade-out {
            opacity: 0;
            pointer-events: none;
        }

        .loader {
            text-align: center;
        }

        .loader-heart {
            font-size: 4rem;
            animation: pulse-heart 1.5s ease-in-out infinite;
        }

        @keyframes pulse-heart {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .loader-text {
            margin-top: 20px;
            font-size: 1.2rem;
            color: var(--text-secondary);
        }

        /* Main Container */
        .experience {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.8s ease;
            overflow-y: auto;
        }

        .experience.active {
            opacity: 1;
            pointer-events: all;
        }

        /* Experience 1: Spotify-Style Love Tape */
        #spotify-experience {
            background: transparent;
            padding: 20px;
        }

        .spotify-header {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .playlist-hero {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 30px;
            align-items: end;
            margin-bottom: 40px;
        }

        .playlist-cover {
            width: 250px;
            height: 250px;
            background: var(--gradient-love);
            border-radius: 8px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease;
        }
        .playlist-cover:hover {
    transform: scale(1.02);
    }

        body.light-theme .playlist-cover {
            box-shadow: 0 20px 60px rgba(236, 72, 153, 0.3);
        }

        .cover-slideshow {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .cover-slide {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            background: var(--gradient-love);
        }

        .cover-slide img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

        .cover-slide.active {
            opacity: 1;
        }

        .cover-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .playlist-info h1 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2.5rem, 6vw, 5rem);
            font-weight: 900;
            margin-bottom: 15px;
            background: var(--gradient-love);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .playlist-meta {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .playlist-stats {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .play-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--primary);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 8px 24px rgba(29, 185, 84, 0.4);
        }

        .play-button:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 32px rgba(29, 185, 84, 0.6);
        }

        .play-button svg {
            width: 24px;
            height: 24px;
            fill: white;
            margin-left: 3px;
        }

        /* Track List */
        .track-list {
            max-width: 1200px;
            margin: 0 auto;
        }
        .track-link {
    text-decoration: none;
    color: inherit;
    display: block;
    }

        .track {
            display: grid;
            grid-template-columns: 40px 1fr auto;
            gap: 15px;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s ease;
            align-items: center;
        }

        .track:hover {
            background: var(--dark-elevated);
        }

        body.light-theme .track:hover {
            background: rgba(236, 72, 153, 0.08);
        }

        .track-number {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .track-info h3 {
            font-size: 1rem;
            font-weight: 500;
            margin-bottom: 5px;
        }

        .track-info p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .track-duration {
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        .next-btn {
            max-width: 1200px;
            margin: 40px auto;
            text-align: center;
        }

        /* Experience 2: Scavenger Hunt */
        #hunt-experience {
            background: transparent;
            padding: 20px;
        }

        .hunt-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .hunt-progress {
            display: flex;
            justify-content: space-between;
            margin-bottom: 50px;
            position: relative;
        }

        .hunt-progress::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--dark-elevated);
            z-index: 0;
        }

        body.light-theme .hunt-progress::before {
            background: rgba(236, 72, 153, 0.2);
        }

        .progress-line {
            position: absolute;
            top: 20px;
            left: 0;
            height: 2px;
            background: var(--gradient-love);
            z-index: 1;
            transition: width 0.5s ease;
        }

        .hunt-step {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--dark-card);
            border: 2px solid var(--dark-elevated);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2;
            position: relative;
            transition: all 0.3s ease;
        }

        .hunt-step.completed {
            background: var(--gradient-love);
            border-color: var(--accent-pink);
        }

        .hunt-step.active {
            transform: scale(1.2);
            box-shadow: 0 0 20px rgba(236, 72, 153, 0.5);
        }

        .hunt-clue {
            background: var(--dark-card);
            padding: 40px;
            border-radius: 16px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        body.light-theme .hunt-clue {
            background: white;
            border-color: rgba(236, 72, 153, 0.2);
            box-shadow: 0 10px 40px rgba(236, 72, 153, 0.15);
        }

        .clue-title {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            margin-bottom: 20px;
            color: var(--accent-pink);
        }

        .clue-text {
            font-size: 1.2rem;
            line-height: 1.8;
            margin-bottom: 30px;
            color: var(--text-secondary);
        }

        .clue-input-group {
            margin-bottom: 20px;
        }

        .clue-input {
            width: 100%;
            padding: 15px 20px;
            background: var(--dark-elevated);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 1.1rem;
            font-family: 'Space Grotesk', sans-serif;
            transition: all 0.3s ease;
        }

        .clue-input:focus {
            outline: none;
            border-color: var(--accent-pink);
            box-shadow: 0 0 20px rgba(236, 72, 153, 0.2);
        }

        .clue-hint {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 10px;
            font-style: italic;
        }

        .clue-feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            font-size: 0.95rem;
            display: none;
        }

        .clue-feedback.correct {
            background: rgba(29, 185, 84, 0.2);
            color: var(--primary);
            border: 1px solid var(--primary);
            display: block;
        }

        .clue-feedback.incorrect {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            border: 1px solid #ef4444;
            display: block;
        }

        /* Experience 3: Photo Gallery */
        #gallery-experience {
            background: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .gallery-container {
            max-width: 1000px;
            width: 100%;
        }

        .gallery-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .gallery-header h2 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2rem, 5vw, 3.5rem);
            margin-bottom: 15px;
            background: var(--gradient-love);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .gallery-slider {
            position: relative;
            width: 100%;
            max-width: 700px;
            margin: 0 auto;
            aspect-ratio: 4/3;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.5);
        }

        body.light-theme .gallery-slider {
            box-shadow: 0 30px 60px rgba(236, 72, 153, 0.25);
        }

        .gallery-slide {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.8s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--dark-card);
        }

        .gallery-slide.active {
            opacity: 1;
        }

        .gallery-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .placeholder-content {
            text-align: center;
            padding: 40px;
        }

        .placeholder-emoji {
            font-size: 5rem;
            margin-bottom: 20px;
        }

        .placeholder-text {
            font-size: 1.2rem;
            color: var(--text-secondary);
        }

        .gallery-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 30px;
        }

        .gallery-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--dark-card);
            border: 2px solid rgba(255, 255, 255, 0.1);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            font-size: 1.5rem;
        }

        .gallery-btn:hover {
            background: var(--dark-elevated);
            border-color: var(--accent-pink);
            transform: scale(1.1);
        }

        body.light-theme .gallery-btn {
            background: white;
            border-color: rgba(236, 72, 153, 0.3);
            color: #1a1a1a;
        }

        body.light-theme .gallery-btn:hover {
            border-color: var(--accent-pink);
        }

        .gallery-dots {
            display: flex;
            gap: 10px;
        }

        .gallery-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        body.light-theme .gallery-dot {
            background: rgba(236, 72, 153, 0.3);
        }

        .gallery-dot.active {
            background: var(--accent-pink);
            width: 30px;
            border-radius: 5px;
        }

        /* Experience 4: Typewriter Reveal */
        #typewriter-experience {
            background: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .typewriter-container {
            max-width: 800px;
            width: 100%;
            padding: 40px;
        }

        .typewriter-text {
            font-family: 'Courier Prime', monospace;
            font-size: clamp(1.2rem, 3vw, 1.8rem);
            line-height: 1.8;
            color: var(--text-primary);
            min-height: 400px;
        }

        .cursor {
            display: inline-block;
            width: 3px;
            height: 1.2em;
            background: var(--accent-pink);
            margin-left: 2px;
            animation: blink 1s infinite;
            vertical-align: text-bottom;
        }

        @keyframes blink {
            0%, 49% { opacity: 1; }
            50%, 100% { opacity: 0; }
        }

        .typewriter-skip {
            text-align: center;
            margin-top: 30px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Experience 5: The Question */
        #question-experience {
            background: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .question-container {
            max-width: 700px;
            width: 100%;
            text-align: center;
        }

        .question-heart {
            font-size: 6rem;
            animation: heartbeat 1.5s ease-in-out infinite;
            margin-bottom: 30px;
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.1); }
            50% { transform: scale(1); }
        }

        .question-title {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2rem, 5vw, 3.5rem);
            margin-bottom: 20px;
            line-height: 1.3;
        }

        .question-subtitle {
            font-size: clamp(1rem, 2.5vw, 1.3rem);
            color: var(--text-secondary);
            margin-bottom: 50px;
            line-height: 1.6;
        }

        .answer-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 50px;
        }

        .answer-btn {
            padding: 20px 60px;
            font-size: 1.3rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Space Grotesk', sans-serif;
            border: none;
        }

        .yes-btn {
            background: var(--gradient-spotify);
            color: white;
            box-shadow: 0 10px 30px rgba(29, 185, 84, 0.4);
        }

        .yes-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 40px rgba(29, 185, 84, 0.6);
        }

        .no-btn {
            background: transparent;
            color: var(--text-secondary);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .no-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        body.light-theme .no-btn {
            border-color: rgba(236, 72, 153, 0.3);
            color: #6b6b6b;
        }

        body.light-theme .no-btn:hover {
            background: rgba(236, 72, 153, 0.1);
        }

        /* Experience 6: Success */
        #success-experience {
            background: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        .success-container {
            max-width: 700px;
            width: 100%;
            text-align: center;
            z-index: 10;
        }

        .success-animation {
            font-size: 8rem;
            margin-bottom: 30px;
            animation: success-bounce 1s ease-out;
        }

        @keyframes success-bounce {
            0% { transform: scale(0) rotate(0deg); }
            50% { transform: scale(1.2) rotate(180deg); }
            100% { transform: scale(1) rotate(360deg); }
        }

        .success-title {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2.5rem, 6vw, 4rem);
            margin-bottom: 20px;
            background: var(--gradient-spotify);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .success-message {
            font-size: clamp(1.1rem, 2.5vw, 1.4rem);
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: 40px;
        }

        .success-info {
            background: var(--dark-card);
            padding: 30px;
            border-radius: 16px;
            margin-top: 40px;
            border: 1px solid rgba(29, 185, 84, 0.3);
        }

        body.light-theme .success-info {
            background: white;
            box-shadow: 0 15px 50px rgba(29, 185, 84, 0.2);
        }

        body.light-theme .success-info h3 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        body.light-theme #shareable-link {
            background: rgba(255, 255, 255, 0.9);
            border-color: var(--primary);
            color: #1a1a1a;
        }

        /* QR Code Styles */
        #qrcode, #notification-qrcode {
            line-height: 0;
        }
        
        #qrcode img, #notification-qrcode img {
            display: block !important;
            margin: 0 auto;
            max-width: 100%;
            height: auto;
        }

        #qrcode canvas, #notification-qrcode canvas {
            display: none !important;
        }

        .success-info p {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.6;
        }

        /* Shared Button Styles */
        .btn {
            padding: 15px 40px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            border: none;
            background: var(--gradient-love);
            color: white;
            transition: all 0.3s ease;
            font-family: 'Space Grotesk', sans-serif;
            box-shadow: 0 10px 30px rgba(236, 72, 153, 0.4);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(236, 72, 153, 0.6);
        }

        .btn-secondary {
            background: transparent;
            border: 2px solid rgba(255, 255, 255, 0.2);
            box-shadow: none;
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--accent-pink);
        }

        /* Confetti */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: var(--accent-pink);
            position: fixed;
            animation: confetti-fall 3s linear forwards;
            z-index: 9999;
        }

        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* Floating romantic elements */
        .floating-romantic {
            position: fixed;
            font-size: 20px;
            opacity: 0;
            animation: float-romantic 15s ease-in-out infinite;
            pointer-events: none;
            z-index: 1;
        }

        @keyframes float-romantic {
            0% {
                transform: translateY(100vh) translateX(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.6;
            }
            50% {
                transform: translateY(50vh) translateX(20px) rotate(180deg);
                opacity: 0.4;
            }
            90% {
                opacity: 0.6;
            }
            100% {
                transform: translateY(-10vh) translateX(0) rotate(360deg);
                opacity: 0;
            }
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .theme-toggle {
                width: 45px;
                height: 45px;
                top: 15px;
                right: 15px;
            }

            .theme-toggle-icon {
                font-size: 1.3rem;
            }

            .response-notification {
                top: 75px;
                right: 15px;
                left: 15px;
                max-width: none;
            }

            .playlist-hero {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .playlist-cover {
                width: 200px;
                height: 200px;
                margin: 0 auto;
            }

            .play-button {
                margin: 20px auto 0;
            }

            .track {
                grid-template-columns: 30px 1fr auto;
                gap: 10px;
            }

            .track-duration {
                font-size: 0.75rem;
            }

            .hunt-step {
                width: 30px;
                height: 30px;
                font-size: 0.8rem;
            }

            .hunt-clue {
                padding: 25px;
            }

            .answer-btn {
                padding: 18px 50px;
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body class="dark-theme">
    <!-- Theme Toggle Button -->
    <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">
        <span class="theme-toggle-icon">üåô</span>
    </button>

    <!-- Response Notification - VISIBLE TO BOTH PARTIES -->
    <div class="response-notification" id="response-notification">
        <button class="notification-close" onclick="closeNotification()">‚úï</button>
        <h4 id="notification-title">Response Received!</h4>
        <p id="notification-message"></p>
        <div class="response-time" id="notification-time"></div>
    </div>

    <!-- Loading Screen -->
    <div class="loading-screen" id="loading">
        <div class="loader">
            <div class="loader-heart">üíï</div>
            <div class="loader-text">Preparing something special...</div>
        </div>
    </div>

    <!-- Floating romantic elements -->
    <div id="floating-elements"></div>

    <!-- Experience 1: Spotify-Style Love Tape -->
    <div class="experience" id="spotify-experience">
        <div class="spotify-header">
            <div class="playlist-hero">
                <div class="playlist-cover">
    <div class="cover-slideshow">
        <div class="cover-slide active">
            <img src="pavine2.jpg" alt="Playlist Cover">
        </div>
    </div>
</div>
                <div class="playlist-info">
                    <p class="playlist-meta">PLAYLIST</p>
                    <h1>PAVINE</h1>
                    <p class="playlist-meta">For Pavine ‚Ä¢ 2026</p>
                    <p class="playlist-stats">5 scenario ‚Ä¢ 1 special question</p>
                    <button class="play-button" onclick="startPlaylist()">
                        <svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                    </button>
                </div>
            </div>
        </div>

        <div class="track-list">
            <a href="https://youtu.be/2yUouC9iXDg?si=Pese4GRk6gZtrfoT" target="_blank" class="track-link">
            <div class="track">
                <span class="track-number">1</span>
                <div class="track-info">
                    <h3>The First Time I Saw You</h3>
                    <p>That moment when everything changed</p>
                </div>
                <span class="track-duration">4:52</span>
            </div>
            </a>
             <a href="https://youtu.be/lVjjkBE9-ks?si=8IHF0lZGKugVNO6b" target="_blank" class="track-link">
            <div class="track">
                <span class="track-number">2</span>
                <div class="track-info">
                    <h3>Every Smile You Give</h3>
                    <p>The light in my darkest time in a while</p>
                </div>
                <span class="track-duration">3:24</span>
            </div>
            </a>

             <a href="https://youtu.be/CKEK3pC7krg?si=b1aPwYJYhMrJe131" target="_blank" class="track-link">
            <div class="track">
                <span class="track-number">3</span>
                <div class="track-info">
                    <h3>Late Night Crashing</h3>
                    <p>I remeber you so hungry and drunk</p>
                </div>
                <span class="track-duration">6:14</span>
            </div>
            </a>

             <a href="https://youtu.be/ofg455BIHrg?si=IoZZN9fURiAp9L_c" target="_blank" class="track-link">
            <div class="track">
                <span class="track-number">4</span>
                <div class="track-info">
                    <h3>The Way You beautiful</h3>
                    <p>My favorite sight of the day</p>
                </div>
                <span class="track-duration">2:58</span>
            </div>
            </a>

             <a href="https://youtu.be/KAO8In9c3lo?si=rwjhX1GJ98L06BeK" target="_blank" class="track-link">
            <div class="track">
                <span class="track-number">5</span>
                <div class="track-info">
                    <h3>This Valentine's Day</h3>
                    <p>A moment I want to share with you</p>
                </div>
                <span class="track-duration">2:34</span>
            </div>
            </a>
        </div>

        <div class="next-btn">
            <button class="btn" onclick="nextExperience('hunt-experience')">Continue ‚Üí</button>
        </div>
    </div>

    <!-- Experience 2: Scavenger Hunt -->
    <div class="experience" id="hunt-experience">
        <div class="hunt-container">
            <h2 style="font-family: 'Playfair Display', serif; font-size: 2.5rem; text-align: center; margin-bottom: 50px; background: var(--gradient-love); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">GO ON.....</h2>
            
            <div class="hunt-progress">
                <div class="progress-line" id="progress-line"></div>
                <div class="hunt-step active" id="step-1">1</div>
                <div class="hunt-step" id="step-2">2</div>
                <div class="hunt-step" id="step-3">3</div>
            </div>

            <div class="hunt-clue" id="clue-1">
                <div class="clue-title">üåü Clue #1</div>
                <div class="clue-text">
                    "In a place where morning light first touches your face, where dreams fade and reality begins. This word describes how I feel when I think of you..."
                </div>
                <div class="clue-input-group">
                    <input type="text" class="clue-input" id="answer-1" placeholder="Enter your answer...">
                    <div class="clue-hint">Hint: It starts with 'H' and has 5 letters üíï</div>
                </div>
                <div class="clue-feedback" id="feedback-1"></div>
                <button class="btn" onclick="checkAnswer(1, 'happy')">Submit Answer</button>
            </div>

            <div class="hunt-clue" id="clue-2" style="display: none;">
                <div class="clue-title">üí´ Clue #2</div>
                <div class="clue-text">
                    "Count the stars in my eyes when I look at you. Take that number and add the petals of a rose. What number do you get?"
                </div>
                <div class="clue-input-group">
                    <input type="text" class="clue-input" id="answer-2" placeholder="Enter the number...">
                    <div class="clue-hint">Hint: Infinite stars + rose petals = ? üåπ</div>
                </div>
                <div class="clue-feedback" id="feedback-2"></div>
                <button class="btn" onclick="checkAnswer(2, '14')">Submit Answer</button>
            </div>

            <div class="hunt-clue" id="clue-3" style="display: none;">
                <div class="clue-title">‚ú® Final Clue</div>
                <div class="clue-text">
                    "The name of the person who thinks you're absolutely incredible and wants to spend Valentine's Day with you..."
                </div>
                <div class="clue-input-group">
                    <input type="text" class="clue-input" id="answer-3" placeholder="Who could it be? üòä">
                    <div class="clue-hint">Hint: Look in the mirror... wait, no! It's ME! Type 'me' or 'you' üíù</div>
                </div>
                <div class="clue-feedback" id="feedback-3"></div>
                <button class="btn" onclick="checkAnswer(3, 'me')">Submit Answer</button>
            </div>
        </div>
    </div>

    <!-- Experience 3: Photo Gallery -->
    <div class="experience" id="gallery-experience">
        <div class="gallery-container">
            <div class="gallery-header">
                <h2>Your beautiful gallery</h2>
                <p style="color: var(--text-secondary); font-size: 1.1rem;">Every picture is breathtaking</p>
            </div>

            <div class="gallery-slider">
    <div class="gallery-slide active">
        <div class="emoji-badge">üì∏</div>
        <img src="pavine1.jpg" class="gallery-img">
    </div>
    
    <div class="gallery-slide">
        <div class="emoji-badge">üåü</div>
        <img src="pavine7.jpg" class="gallery-img">
    </div>
    
    <div class="gallery-slide">
        <div class="emoji-badge">üí´</div>
        <img src="pavine3.jpg" class="gallery-img">
    </div>
    
    <div class="gallery-slide">
        <div class="emoji-badge">‚ú®</div>
        <img src="pavine6.jpg" class="gallery-img">
    </div>
    
    <div class="gallery-slide">
        <div class="emoji-badge">üéÄ</div>
        <img src="pavine5.jpg" class="gallery-img">
    </div>
</div>

            <div class="gallery-controls">
                <button class="gallery-btn" onclick="changeSlide(-1)">‚Äπ</button>
                <div class="gallery-dots">
                    <div class="gallery-dot active" onclick="goToSlide(0)"></div>
                    <div class="gallery-dot" onclick="goToSlide(1)"></div>
                    <div class="gallery-dot" onclick="goToSlide(2)"></div>
                    <div class="gallery-dot" onclick="goToSlide(3)"></div>
                    <div class="gallery-dot" onclick="goToSlide(4)"></div>
                </div>
                <button class="gallery-btn" onclick="changeSlide(1)">‚Ä∫</button>
            </div>

            <div class="next-btn">
                <button class="btn" onclick="nextExperience('typewriter-experience')" style="margin-top: 50px;">Continue the Journey ‚Üí</button>
            </div>
        </div>
    </div>

    <!-- Experience 4: Typewriter -->
    <div class="experience" id="typewriter-experience">
        <div class="typewriter-container">
            <div class="typewriter-text" id="typewriter-text"></div>
            <div class="typewriter-skip">
                <button class="btn btn-secondary" onclick="skipTypewriter()">Skip Animation ‚Üí</button>
            </div>
        </div>
    </div>

    <!-- Experience 5: The Question -->
    <div class="experience" id="question-experience">
        <div class="question-container">
            <div class="question-heart">üíñ</div>
            <h2 class="question-title">Pavine,<br>Will You Be My Valentine?</h2>
            <p class="question-subtitle">
                I've planned this whole experience because you deserve something as special as you are. 
                Every moment with you is a gift, and I can't imagine celebrating this day without you.
            </p>
            <div class="answer-buttons">
                <button class="answer-btn yes-btn" onclick="handleYes()">Yes! I'd love to! üíï</button>
                <button class="answer-btn no-btn" id="no-btn" onclick="handleNo()">Maybe not...</button>
            </div>
        </div>
    </div>

    <!-- Experience 6: Success -->
    <div class="experience" id="success-experience">
        <div class="success-container">
            <div class="success-animation">üéâ</div>
            <h2 class="success-title">She Said YES! üíö</h2>
            <p class="success-message">
                Pavine, you just made me the happiest person in the world! I can't wait to make this Valentine's Day unforgettable for you. Get ready for something nice! üíï
            </p>
            <div class="success-info">
                <h3>‚ú® Response Captured!</h3>
                <p>Her answer has been saved. Time: <span id="response-time"></span></p>
                <p style="margin-top: 10px;">This moment will be remembered forever! üíñ</p>
                
                <!-- Shareable Link Section -->
                <div id="share-section" style="margin-top: 25px; padding-top: 20px; border-top: 1px solid rgba(29, 185, 84, 0.3); display: none;">
                    <h4 style="color: var(--primary); font-size: 1rem; margin-bottom: 10px;">üì§ Share Your Response</h4>
                    <p style="font-size: 0.85rem; margin-bottom: 15px;">Screenshot this QR code and send it, or copy the link below:</p>
                    
                    <!-- QR Code -->
                    <div style="text-align: center; margin-bottom: 20px;">
                        <div id="qrcode" style="display: inline-block; padding: 15px; background: white; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.2);"></div>
                        <p style="font-size: 0.75rem; margin-top: 10px; opacity: 0.8;">üì∏ Screenshot and send this QR code!</p>
                    </div>
                    
                    <!-- Link Option -->
                    <p style="font-size: 0.85rem; margin-bottom: 10px; opacity: 0.9;">Or copy this link:</p>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" id="shareable-link" readonly 
                            style="flex: 1; padding: 10px; border-radius: 8px; border: 2px solid var(--primary); 
                            background: var(--dark-elevated); color: var(--text-primary); font-size: 0.85rem;"
                            onclick="this.select();">
                        <button onclick="copyShareableLink()" 
                            style="padding: 10px 20px; border-radius: 8px; border: none; 
                            background: var(--primary); color: white; cursor: pointer; font-weight: 600;">
                            Copy
                        </button>
                    </div>
                    <p style="font-size: 0.75rem; margin-top: 8px; opacity: 0.7;">Scan the QR code or open the link to see the response! üíï</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize
        let currentSlide = 0;
        let currentExperience = 'spotify-experience';
        let huntStep = 1;
        let noClickCount = 0;

        // Theme Management
        function toggleTheme() {
            const body = document.body;
            const icon = document.querySelector('.theme-toggle-icon');
            
            if (body.classList.contains('dark-theme')) {
                body.classList.remove('dark-theme');
                body.classList.add('light-theme');
                icon.textContent = '‚òÄÔ∏è';
                localStorage.setItem('theme', 'light');
            } else {
                body.classList.remove('light-theme');
                body.classList.add('dark-theme');
                icon.textContent = 'üåô';
                localStorage.setItem('theme', 'dark');
            }
        }

        // Load saved theme or detect system preference
        function loadTheme() {
            const savedTheme = localStorage.getItem('theme');
            const icon = document.querySelector('.theme-toggle-icon');
            
            if (savedTheme) {
                if (savedTheme === 'light') {
                    document.body.classList.remove('dark-theme');
                    document.body.classList.add('light-theme');
                    icon.textContent = '‚òÄÔ∏è';
                }
            } else {
                // Detect system preference
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) {
                    document.body.classList.remove('dark-theme');
                    document.body.classList.add('light-theme');
                    icon.textContent = '‚òÄÔ∏è';
                }
            }
        }

        // Show notification - VISIBLE TO BOTH PARTIES
        function showNotification(answer) {
            const notification = document.getElementById('response-notification');
            const title = document.getElementById('notification-title');
            const message = document.getElementById('notification-message');
            const time = document.getElementById('notification-time');
            
            const now = new Date();
            const timeString = now.toLocaleString();
            
            if (answer === 'yes') {
                notification.classList.add('answer-yes');
                notification.classList.remove('answer-no');
                title.textContent = 'üíö She Said YES!';
                message.textContent = 'Pavine accepted your Valentine\'s invitation! This is going to be amazing! üéâ';
            } else {
                notification.classList.add('answer-no');
                notification.classList.remove('answer-yes');
                title.textContent = 'üíî She Said No';
                message.textContent = 'Pavine declined the invitation. But keep trying, love doesn\'t give up! üí™';
            }
            
            time.textContent = `Response time: ${timeString}`;
            notification.classList.add('show');
            
            // Keep notification visible longer for you to see
            setTimeout(() => {
                // Don't auto-hide, let user close it manually
                // notification.classList.remove('show');
            }, 30000);
        }

        // Close notification
        function closeNotification() {
            document.getElementById('response-notification').classList.remove('show');
        }

        // Create floating romantic elements
        function createFloatingElement() {
            const elements = ['üíï', 'üíñ', 'üíó', 'üíù', 'üåπ', '‚ú®', 'üí´', '‚≠ê'];
            const element = document.createElement('div');
            element.className = 'floating-romantic';
            element.textContent = elements[Math.floor(Math.random() * elements.length)];
            element.style.left = Math.random() * 100 + 'vw';
            element.style.animationDelay = Math.random() * 5 + 's';
            element.style.fontSize = (Math.random() * 15 + 15) + 'px';
            document.getElementById('floating-elements').appendChild(element);
            
            setTimeout(() => element.remove(), 15000);
        }

        // Start floating elements
        setInterval(createFloatingElement, 3000);
        for (let i = 0; i < 5; i++) {
            setTimeout(createFloatingElement, i * 600);
        }

        // Loading screen
        window.addEventListener('load', () => {
            loadTheme();
            
            // Check for URL parameters first
            checkUrlParameters();
            
            setTimeout(() => {
                document.getElementById('loading').classList.add('fade-out');
                setTimeout(() => {
                    document.getElementById('spotify-experience').classList.add('active');
                }, 500);
            }, 2000);
            
            // Check for existing response
            checkExistingResponse();
        });

        // Generate shareable URL with response
        function generateShareableUrl(answer) {
            const timestamp = new Date().toISOString();
            const date = new Date().toLocaleString();
            const baseUrl = window.location.href.split('?')[0]; // Remove existing params
            const params = new URLSearchParams({
                response: answer,
                timestamp: timestamp,
                date: date
            });
            return `${baseUrl}?${params.toString()}`;
        }

        // Check URL parameters on page load
        function checkUrlParameters() {
            const urlParams = new URLSearchParams(window.location.search);
            const response = urlParams.get('response');
            const timestamp = urlParams.get('timestamp');
            const date = urlParams.get('date');
            
            if (response && timestamp) {
                // Save to localStorage
                const responseData = {
                    answer: response,
                    timestamp: timestamp,
                    date: date || new Date(timestamp).toLocaleString()
                };
                localStorage.setItem('pavine_valentine_response', JSON.stringify(responseData));
                
                // Show notification immediately
                setTimeout(() => {
                    showNotification(response);
                }, 2500);
            }
        }

        // Show shareable URL in notification
        function showShareUrlInNotification(url) {
            const notification = document.getElementById('response-notification');
            const message = document.getElementById('notification-message');
            
            message.innerHTML = `
                Response saved! Share this link:<br>
                <input type="text" value="${url}" 
                    style="width: 100%; padding: 8px; margin-top: 10px; border-radius: 4px; 
                    border: 1px solid var(--accent-pink); background: var(--dark-elevated); 
                    color: var(--text-primary); font-size: 0.8rem;" 
                    onclick="this.select(); document.execCommand('copy');" 
                    readonly>
                <small style="display: block; margin-top: 5px; opacity: 0.7;">Click to copy</small>
            `;
        }

        // Show share options (QR code + link) in notification
        function showShareOptionsInNotification(url) {
            const notification = document.getElementById('response-notification');
            const message = document.getElementById('notification-message');
            
            message.innerHTML = `
                <div style="text-align: center; margin-bottom: 12px;">
                    <div id="notification-qrcode" style="display: inline-block; padding: 10px; background: white; border-radius: 8px;"></div>
                    <p style="font-size: 0.7rem; margin-top: 8px; opacity: 0.8;">üì∏ Screenshot this QR code!</p>
                </div>
                <p style="font-size: 0.8rem; margin-bottom: 8px;">Or copy the link:</p>
                <input type="text" value="${url}" 
                    style="width: 100%; padding: 8px; border-radius: 4px; 
                    border: 1px solid var(--accent-pink); background: var(--dark-elevated); 
                    color: var(--text-primary); font-size: 0.75rem;" 
                    onclick="this.select(); document.execCommand('copy');" 
                    readonly>
                <small style="display: block; margin-top: 5px; opacity: 0.7;">Click link to copy</small>
            `;
            
            // Generate QR code in notification
            setTimeout(() => {
                generateNotificationQRCode(url);
            }, 100);
        }

        // Generate QR Code using qrcode-generator library
        function generateQRCode(url) {
            const qrcodeContainer = document.getElementById('qrcode');
            if (qrcodeContainer && typeof qrcode !== 'undefined') {
                qrcodeContainer.innerHTML = ''; // Clear previous QR code
                
                // Create QR code
                var qr = qrcode(0, 'H'); // type 0 = auto, error correction level H
                qr.addData(url);
                qr.make();
                
                // Create image with proper size
                var img = document.createElement('img');
                img.src = qr.createDataURL(8, 0); // cell size 8, margin 0
                img.style.width = '200px';
                img.style.height = '200px';
                img.style.display = 'block';
                img.style.margin = '0 auto';
                
                qrcodeContainer.appendChild(img);
            } else {
                console.error('QRCode library not loaded or container not found');
            }
        }

        // Generate QR Code for notification
        function generateNotificationQRCode(url) {
            const qrcodeContainer = document.getElementById('notification-qrcode');
            if (qrcodeContainer && typeof qrcode !== 'undefined') {
                qrcodeContainer.innerHTML = ''; // Clear previous QR code
                
                // Create QR code
                var qr = qrcode(0, 'H');
                qr.addData(url);
                qr.make();
                
                // Create image with proper size
                var img = document.createElement('img');
                img.src = qr.createDataURL(6, 0); // smaller cell size for notification
                img.style.width = '150px';
                img.style.height = '150px';
                img.style.display = 'block';
                img.style.margin = '0 auto';
                
                qrcodeContainer.appendChild(img);
            }
        }

        // Check for existing response - SHOW TO YOU TOO
        function checkExistingResponse() {
            const savedResponse = localStorage.getItem('pavine_valentine_response');
            if (savedResponse) {
                const response = JSON.parse(savedResponse);
                // Show notification about existing response to BOTH parties
                setTimeout(() => {
                    showNotification(response.answer);
                }, 3000);
            }
        }

        // Spotify cover slideshow
        let coverIndex = 0;
        function rotateCover() {
            const slides = document.querySelectorAll('#cover-slideshow .cover-slide');
            slides[coverIndex].classList.remove('active');
            coverIndex = (coverIndex + 1) % slides.length;
            slides[coverIndex].classList.add('active');
        }
        setInterval(rotateCover, 3000);

        // Start playlist
        function startPlaylist() {
            nextExperience('hunt-experience');
        }

        // Experience navigation
        function nextExperience(experienceId) {
            document.getElementById(currentExperience).classList.remove('active');
            currentExperience = experienceId;
            document.getElementById(experienceId).classList.add('active');
        }

        // Scavenger hunt
        function checkAnswer(step, correctAnswer) {
            const input = document.getElementById(`answer-${step}`).value.toLowerCase().trim();
            const feedback = document.getElementById(`feedback-${step}`);
            
            const alternatives = {
                1: ['happy', 'hopeful', 'heart'],
                2: ['14', 'fourteen'],
                3: ['me', 'you', 'us']
            };

            const possibleAnswers = alternatives[step] || [correctAnswer];
            
            if (possibleAnswers.includes(input)) {
                feedback.textContent = '‚úì Perfect! Moving to the next clue...';
                feedback.className = 'clue-feedback correct';
                
                document.getElementById(`step-${step}`).classList.add('completed');
                
                setTimeout(() => {
                    document.getElementById(`clue-${step}`).style.display = 'none';
                    if (step < 3) {
                        document.getElementById(`clue-${step + 1}`).style.display = 'block';
                        document.getElementById(`step-${step + 1}`).classList.add('active');
                        updateProgressLine(step + 1);
                    } else {
                        nextExperience('gallery-experience');
                    }
                }, 1500);
            } else {
                feedback.textContent = '‚úó Not quite! Check the hint and try again.';
                feedback.className = 'clue-feedback incorrect';
            }
        }

        function updateProgressLine(step) {
            const percentage = ((step - 1) / 2) * 100;
            document.getElementById('progress-line').style.width = percentage + '%';
        }

        // Gallery controls
        function changeSlide(direction) {
            const slides = document.querySelectorAll('.gallery-slide');
            const dots = document.querySelectorAll('.gallery-dot');
            
            slides[currentSlide].classList.remove('active');
            dots[currentSlide].classList.remove('active');
            
            currentSlide = (currentSlide + direction + slides.length) % slides.length;
            
            slides[currentSlide].classList.add('active');
            dots[currentSlide].classList.add('active');
        }

        function goToSlide(index) {
            const slides = document.querySelectorAll('.gallery-slide');
            const dots = document.querySelectorAll('.gallery-dot');
            
            slides[currentSlide].classList.remove('active');
            dots[currentSlide].classList.remove('active');
            
            currentSlide = index;
            
            slides[currentSlide].classList.add('active');
            dots[currentSlide].classList.add('active');
        }

        // Auto-advance gallery
        setInterval(() => {
            if (currentExperience === 'gallery-experience') {
                changeSlide(1);
            }
        }, 5000);

        // Typewriter effect
        const typewriterMessage = `Dear Pavine,

From the moment I met you, I knew there was something special about you. Your smile lights up my day every single time I see it, and you're the most beautiful girl my eyes keep coming back to even my mind can't explain it, but it's true you might not believe it.

Every conversation we have just confirms what I already know in my heart...


You are incredible.

You are kind, intelligent, beautiful, breathtaking and so much more than words can express.

All this might be cringe but haven't felt like this in a while im always looking forward to talk to you, anyways let me not ruin this.

This Valentine's Day, I want to do something different. I want to show you just how much you mean to me, in every way I can.

So I have one simple question to ask...`;

        let charIndex = 0;
        let typewriterInterval;

        function startTypewriter() {
            const textElement = document.getElementById('typewriter-text');
            typewriterInterval = setInterval(() => {
                if (charIndex < typewriterMessage.length) {
                    textElement.innerHTML = typewriterMessage.substring(0, charIndex + 1) + '<span class="cursor"></span>';
                    charIndex++;
                } else {
                    clearInterval(typewriterInterval);
                    setTimeout(() => {
                        nextExperience('question-experience');
                    }, 2000);
                }
            }, 140);
        }

        function skipTypewriter() {
            clearInterval(typewriterInterval);
            nextExperience('question-experience');
        }

        // Watch for typewriter experience
        const observer = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
                if (mutation.target.classList.contains('active') && 
                    mutation.target.id === 'typewriter-experience') {
                    setTimeout(startTypewriter, 500);
                }
            });
        });

        observer.observe(document.getElementById('typewriter-experience'), {
            attributes: true,
            attributeFilter: ['class']
        });

        // No button behavior
        const noMessages = [
            "Are you sure? ü•∫",
            "Think about it, Pavine... üí≠",
            "Really? But I planned all this! üíî",
            "Please? Pretty please? üôè",
            "Come on, you know you want to! üòä",
            "I won't give up! üí™",
            "Last chance... üíù",
            "Fine, I'll just keep asking! üòÑ"
        ];

        function handleNo() {
            const noBtn = document.getElementById('no-btn');
            
            if (noClickCount < noMessages.length) {
                noBtn.textContent = noMessages[noClickCount];
                noClickCount++;
                
                // Save "no" response - VISIBLE TO BOTH
                if (noClickCount === 1) {
                    const response = {
                        answer: 'no',
                        timestamp: new Date().toISOString(),
                        date: new Date().toLocaleString(),
                        attempts: noClickCount
                    };
                    localStorage.setItem('pavine_valentine_response', JSON.stringify(response));
                    
                    // Generate shareable URL
                    const shareableUrl = generateShareableUrl('no');
                    
                    showNotification('no');
                    
                    // Show QR code and share URL in notification after a delay
                    setTimeout(() => {
                        showShareOptionsInNotification(shareableUrl);
                    }, 2000);
                }
                
                if (noClickCount > 3) {
                    const x = (Math.random() - 0.5) * 100;
                    const y = (Math.random() - 0.5) * 50;
                    noBtn.style.transform = `translate(${x}px, ${y}px)`;
                }
                
                const yesBtn = document.querySelector('.yes-btn');
                const scale = 1 + (noClickCount * 0.08);
                yesBtn.style.transform = `scale(${scale})`;
            }
        }

        // Handle YES - Save response and SHOW TO BOTH
        function handleYes() {
            // Save response with timestamp
            const response = {
                answer: 'yes',
                timestamp: new Date().toISOString(),
                date: new Date().toLocaleString()
            };
            
            localStorage.setItem('pavine_valentine_response', JSON.stringify(response));
            
            // Generate shareable URL
            const shareableUrl = generateShareableUrl('yes');
            
            // Show notification - VISIBLE TO BOTH PARTIES
            showNotification('yes');
            
            // Show success screen with shareable link and QR code
            document.getElementById('response-time').textContent = response.date;
            document.getElementById('shareable-link').value = shareableUrl;
            document.getElementById('share-section').style.display = 'block';
            
            // Generate QR Code
            setTimeout(() => {
                generateQRCode(shareableUrl);
            }, 100);
            
            nextExperience('success-experience');
            
            // Create confetti
            createConfetti();
        }

        // Confetti effect
        function createConfetti() {
            const colors = ['#1DB954', '#ec4899', '#8b5cf6', '#f59e0b', '#06b6d4'];
            for (let i = 0; i < 150; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.top = '-10px';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.width = (Math.random() * 10 + 5) + 'px';
                    confetti.style.height = (Math.random() * 10 + 5) + 'px';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 30);
            }
        }

        // Copy shareable link to clipboard
        function copyShareableLink() {
            const linkInput = document.getElementById('shareable-link');
            linkInput.select();
            linkInput.setSelectionRange(0, 99999); // For mobile devices
            
            // Try modern clipboard API first
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(linkInput.value).then(() => {
                    alert('‚úÖ Link copied! Send this to see the notification when you open it.');
                }).catch(() => {
                    // Fallback to execCommand
                    document.execCommand('copy');
                    alert('‚úÖ Link copied! Send this to see the notification when you open it.');
                });
            } else {
                // Fallback for older browsers
                document.execCommand('copy');
                alert('‚úÖ Link copied! Send this to see the notification when you open it.');
            }
        }
    </script>
</body>
</html>
